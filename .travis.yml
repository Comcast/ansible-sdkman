---
sudo: required
language: python
python:
  - 3.6
env:
  - MOLECULE_SCENARIO=alpine MOLECULE_USER=jenkins
  - MOLECULE_SCENARIO=alpine MOLECULE_USER=root
  - MOLECULE_SCENARIO=centos MOLECULE_USER=jenkins
  - MOLECULE_SCENARIO=centos MOLECULE_USER=root
  - MOLECULE_SCENARIO=debian MOLECULE_USER=jenkins
  - MOLECULE_SCENARIO=debian MOLECULE_USER=root
  - MOLECULE_SCENARIO=fedora MOLECULE_USER=jenkins
  - MOLECULE_SCENARIO=fedora MOLECULE_USER=root
  - MOLECULE_SCENARIO=ubuntu MOLECULE_USER=jenkins
  - MOLECULE_SCENARIO=ubuntu MOLECULE_USER=root
services:
  - docker
before_install:
  - sudo apt-get -qq update
install:
  - python3 -m pip install -U pip
  - python3 -m pip install -U virtualenv
  - python3 -m venv .venv
  - source .venv/bin/activate
  - pip install -r tests/test-requirements.txt
script:
  - molecule test --scenario-name ${MOLECULE_SCENARIO}
branches:
  only:
    - master
    - /^\d+\.\d+(\.\d+)?(-\S*)?$/
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
